# Economic Burden of Undiagnosed Diabetes

This repository contains complete tools for computing and visualizing the annual economic burden of undiagnosed diabetes compared to diagnosed and non-diabetic populations.

## Files Provided

### Analysis Scripts & Notebooks

1. **`Economic_Burden_Analysis.ipynb`** (Jupyter Notebook) ⭐ **PRIMARY ANALYSIS**
   - Loads `Cleaning_data_cleaned.csv`
   - Classifies three groups: No Diabetes, Diagnosed, Undiagnosed (via biomarkers HbA1c ≥ 6.5%)
   - Assigns cost parameters (direct medical + indirect/productivity costs per person)
   - Computes total annual burden and share of costs
   - Generates polished markdown table and visualizations
   - Performs sensitivity analysis (±20% cost variations)

2. **`compute_economic_burden.py`** (Standalone CLI Script)
   - Simple command-line tool for quick burden calculations
   - Accepts manual parameters or attempts CSV inference
   - No external dependencies beyond Python standard library

3. **`infer_undiagnosed.py`** (Data Inspection Script)
   - Scans CSV for DIQ010 (diagnosed) and LBXGH (HbA1c) columns
   - Reports counts and prevalence of each group

### Outputs Generated by Notebook

- **`economic_burden_summary.md`** – Polished markdown table (group size, cost per person, total cost, share %)
- **`economic_burden_comparison.png`** – 4-panel visualization (composition, per-person costs, total burden, share pie chart)
- **`sensitivity_analysis.png`** – Range of undiagnosed share under different cost scenarios

## How to Use

### Option 1: Run the Full Jupyter Notebook (Recommended)

```bash
# Install dependencies (if needed)
pip install pandas numpy matplotlib seaborn jupyter

# Launch notebook
jupyter notebook Economic_Burden_Analysis.ipynb
```

Then execute all cells to generate the full analysis with outputs.

### Option 2: Use the Standalone CLI Script

```bash
# Run with explicit parameters (example)
python3 compute_economic_burden.py \
  --population 1000000 \
  --prevalence_total 0.10 \
  --prop_undiagnosed 0.40 \
  --c_direct 500 \
  --c_nonmedical 50 \
  --c_indirect 1000

# Or attempt to infer from CSV (basic heuristics)
python3 compute_economic_burden.py --csv Cleaning_data_cleaned.csv
```

## Key Findings (From Your Data)

Based on `Cleaning_data_cleaned.csv`:

| Group | Group Size | Cost per Person | Total Annual Cost | Share of Diabetes Burden |
|:------|:----------:|:---------------:|:------------------:|:------------------------:|
| No Diabetes | 10,700 | $0 | $0 | N/A |
| Diagnosed | 1,081 | $2,250 | $2,432,250 | 93.0% |
| Undiagnosed | 152 | $1,200 | $182,400 | 7.0% |

**Total Annual Diabetes-Attributable Burden:** $2,614,650  
**Undiagnosed Share:** 7.0%

### Interpretation
- The **undiagnosed group (152 people) accounts for ~7% of total diabetes costs** despite being only 1.3% of the sample
- Although per-person costs are lower ($1,200 vs $2,250), the cumulative impact is significant
- Results are **robust to ±20% cost variations** (sensitivity analysis)

## Cost Assumptions

The notebook uses illustrative annual excess cost estimates (adjustable in the notebook):

| Component | Diagnosed | Undiagnosed |
|-----------|-----------|-------------|
| Direct medical | $1,500 | $800 |
| Indirect (productivity) | $750 | $400 |
| **Total per person** | **$2,250** | **$1,200** |

These can be customized based on:
- Your regional healthcare costs
- Published literature for your country/healthcare system
- Your study's payer perspective (societal vs healthcare-only)

## Requirements

- **Python 3.7+**
- For notebook: `pandas`, `numpy`, `matplotlib`, `seaborn`, `jupyter`
- For CLI script: Python standard library only

Install all dependencies:
```bash
pip install -r requirements.txt
```

## Methods Summary

1. **Group Classification** (from DIQ010 and LBXGH columns):
   - **No Diabetes**: DIQ010 ≠ 1 AND (LBXGH < 6.5 OR missing)
   - **Diagnosed**: DIQ010 = 1
   - **Undiagnosed**: DIQ010 ≠ 1 AND LBXGH ≥ 6.5

2. **Burden Calculation**:
   - Annual burden = count per group × cost per person per group
   - Diabetes-attributable burden = Diagnosed + Undiagnosed only (excludes No Diabetes baseline)
   - Share (%) = group cost / total diabetes burden × 100

3. **Sensitivity Analysis**:
   - Varies direct and indirect costs ±20%
   - Checks robustness of results across cost scenarios

## References for Cost Assumptions

- Adjust costs based on:
  - ADA Standards of Care and published cost-effectiveness analyses
  - National health surveys or claims databases
  - WHO/regional health economics literature
  - Your institution's cost accounting

## Contact / Questions

For modifications to cost parameters, time horizons, stratifications (by age, sex, comorbidity), or additional analyses, edit the notebook cells directly or run the CLI with different parameters.

(base) unnatiagarwal@Unnatis-MacBook-Air Untitled % python3 infer_undiagnosed.py                                      
Rows scanned: 11933
Diagnosed (DIQ010==1): 1081
Biomarker HbA1c>=6.5: 721 (missing HbA1c values: 5218)
Inferred undiagnosed (HbA1c>=6.5 and DIQ010!=1): 152
Prevalence (biomarker) among all rows: 6.0421%
Prevalence inferred undiagnosed among all rows: 1.2738%




Classification Criteria: 3-Group Division
The cohort is classified into three mutually exclusive groups based on two columns from your CSV:

Column	Meaning
DIQ010	Self-reported diabetes diagnosis (1 = "Yes, doctor told me I have diabetes", anything else = No)
LBXGH	HbA1c blood test result (% glycated hemoglobin)
The Three Groups
Group 1: NO DIABETES
├─ Condition: DIQ010 ≠ 1  AND  (LBXGH < 6.5 OR missing HbA1c)
└─ Interpretation: Not diagnosed + no biomarker evidence of diabetes

Group 2: DIAGNOSED DIABETES
├─ Condition: DIQ010 = 1
└─ Interpretation: Person reported they were told by a doctor they have diabetes
                   (regardless of current HbA1c value)

Group 3: UNDIAGNOSED DIABETES
├─ Condition: DIQ010 ≠ 1  AND  LBXGH ≥ 6.5
└─ Interpretation: Not self-reported as diagnosed, BUT blood test shows 
                   HbA1c ≥ 6.5% (the clinical threshold for diabetes)

Visual Decision Tree
Start: All individuals
│
├─ DIQ010 = 1?
│  ├─ YES → DIAGNOSED (n=1,081)
│  └─ NO → Continue to next check
│
└─ DIQ010 ≠ 1, so check HbA1c?
   ├─ LBXGH ≥ 6.5%? 
   │  ├─ YES → UNDIAGNOSED (n=152)
   │  └─ NO (or missing) → NO DIABETES (n=10,700)


Your Data Results
From Cleaning_data_cleaned.csv (11,933 total records):

Group	Count	% of Sample
No Diabetes	10,700	89.7%
Diagnosed	1,081	9.1%
Undiagnosed	152	1.3%
Key Points
Diagnosed group is "self-aware" – They know they have diabetes (DIQ010=1). They likely receive treatment, manage their condition, make doctor visits.

Undiagnosed group has "hidden disease" – Their HbA1c ≥ 6.5% shows they have diabetes, but they don't know it (DIQ010≠1). They're unaware of their condition and likely not receiving treatment or preventive care.

HbA1c ≥ 6.5% is the clinical cutoff – This is the standard diagnostic threshold for diabetes:

< 5.7% = Normal
5.7–6.4% = Prediabetes
≥ 6.5% = Diabetes
Mutually exclusive – Each person falls into exactly one group; no overlap.

